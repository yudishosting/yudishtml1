<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playlist Musik Favorit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');
    
    * {
      font-family: 'Poppins', sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 25%, #667eea 50%, #764ba2 75%, #f093fb 100%);
      background-size: 300% 300%;
      animation: gradientMove 15s ease infinite;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    @keyframes gradientMove {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    /* Animated Background Particles */
    .particle {
      position: fixed;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      pointer-events: none;
      animation: particleFloat 20s linear infinite;
      z-index: 1;
    }
    
    @keyframes particleFloat {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100vh) rotate(360deg);
        opacity: 0;
      }
    }
    
    .glass-effect {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 35px 80px rgba(0, 0, 0, 0.12), 
                  0 15px 35px rgba(0, 0, 0, 0.1),
                  inset 0 1px 0 rgba(255, 255, 255, 0.3);
      position: relative;
      z-index: 10;
    }
    
    .glass-effect::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%, rgba(255, 255, 255, 0.05) 100%);
      border-radius: inherit;
      z-index: -1;
    }
    
    .card-gradient {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.04));
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
    }
    
    .card-gradient::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #667eea);
      background-size: 300% 300%;
      animation: borderGlow 4s ease infinite;
      z-index: -1;
      border-radius: inherit;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .card-gradient:hover::before {
      opacity: 1;
    }
    
    @keyframes borderGlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(251, 191, 36, 0.3); }
      50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(251, 191, 36, 0.6); }
    }
    
    .fade-in {
      animation: fadeIn 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
    }
    
    .pulse-animation {
      animation: pulse 3s ease-in-out infinite;
    }
    
    ::-webkit-scrollbar {
      width: 10px;
    }
    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
    }
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(45deg, #667eea, #764ba2);
      border-radius: 20px;
      box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
    }
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(45deg, #764ba2, #f093fb);
      box-shadow: 0 0 15px rgba(240, 147, 251, 0.7);
    }
    
    .lyric-line {
      padding: 12px 0;
      transition: all 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
      opacity: 0.5;
      border-radius: 12px;
      margin: 4px 0;
      padding-left: 20px;
      position: relative;
    }
    
    .lyric-line.current {
      color: #fbbf24;
      font-weight: 700;
      transform: translateX(15px) scale(1.03);
      opacity: 1;
      background: linear-gradient(90deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 100%);
      border-left: 5px solid #fbbf24;
      box-shadow: 0 4px 20px rgba(251, 191, 36, 0.3);
    }
    
    .lyric-line.current::before {
      content: 'â™ª';
      position: absolute;
      left: -15px;
      color: #fbbf24;
      animation: noteFloat 2s ease-in-out infinite;
    }
    
    @keyframes noteFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }
    
    .lyric-line.passed {
      opacity: 0.3;
      color: rgba(255, 255, 255, 0.4);
      transform: translateX(-5px) scale(0.98);
    }
    
    .lyric-line.upcoming {
      opacity: 0.7;
      color: rgba(255, 255, 255, 0.8);
    }
    
    .artist-card {
      transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
      transform-origin: center;
      cursor: pointer;
    }
    
    .artist-card:hover {
      transform: translateY(-12px) scale(1.05) rotateY(5deg);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.08));
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25),
                  0 0 50px rgba(102, 126, 234, 0.3);
    }
    
    .artist-card:hover .artist-photo {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 15px 40px rgba(251, 191, 36, 0.4);
    }
    
    .song-card {
      transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
      cursor: pointer;
      position: relative;
    }
    
    .song-card:hover {
      transform: translateY(-5px) translateX(5px);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2),
                  0 0 30px rgba(102, 126, 234, 0.2);
    }
    
    .song-card:hover .play-icon {
      color: #f093fb;
      transform: scale(1.2) rotate(10deg);
      filter: drop-shadow(0 0 10px rgba(240, 147, 251, 0.8));
    }
    
    .contact-icon {
      transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .contact-icon:hover {
      transform: scale(1.1) translateY(-2px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .contact-icon::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }
    
    .contact-icon:hover::before {
      left: 100%;
    }
    
    .floating-music-note {
      position: absolute;
      animation: musicFloat 8s ease-in-out infinite;
      opacity: 0.06;
      font-size: 2rem;
      color: white;
      filter: blur(0.5px);
    }
    
    @keyframes musicFloat {
      0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); }
      25% { transform: translateY(-15px) rotate(90deg) scale(1.1); }
      50% { transform: translateY(-25px) rotate(180deg) scale(0.9); }
      75% { transform: translateY(-15px) rotate(270deg) scale(1.1); }
    }
    
    .control-btn {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255, 255, 255, 0.15);
      transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .control-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3),
                  0 0 30px rgba(102, 126, 234, 0.4);
      border-color: rgba(102, 126, 234, 0.5);
    }
    
    .control-btn:active {
      transform: translateY(-2px) scale(0.98);
    }
    
    .control-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%);
      transition: all 0.3s ease;
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }
    
    .control-btn:hover::before {
      width: 100px;
      height: 100px;
    }
    
    .now-playing-text {
      background: linear-gradient(270deg, #fbbf24 0%, #f093fb 25%, #667eea 50%, #764ba2 75%, #fbbf24 100%);
      background-size: 400% 400%;
      animation: textGradient 4s ease infinite;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }
    
    @keyframes textGradient {
      0%, 100% { background-position: 0% 50%; }
      25% { background-position: 100% 50%; }
      50% { background-position: 200% 50%; }
      75% { background-position: 300% 50%; }
    }
    
    .grid-responsive {
      display: grid;
      gap: 2rem;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
    
    @media (min-width: 768px) {
      .grid-responsive {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (min-width: 1024px) {
      .grid-responsive {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    .empty-state {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(15px);
      border: 2px dashed rgba(255, 255, 255, 0.15);
      transition: all 0.3s ease;
    }
    
    .empty-state:hover {
      border-color: rgba(102, 126, 234, 0.3);
      background: rgba(102, 126, 234, 0.05);
    }
    
    /* Loading Animation */
    .loading-spinner {
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    /* Music Visualizer Effect */
    .music-visualizer {
      display: flex;
      align-items: end;
      height: 30px;
      gap: 3px;
      margin: 0 10px;
    }
    
    .visualizer-bar {
      width: 3px;
      background: linear-gradient(to top, #667eea, #f093fb);
      border-radius: 2px;
      animation: visualize 1.5s ease-in-out infinite;
    }
    
    .visualizer-bar:nth-child(1) { animation-delay: 0.1s; }
    .visualizer-bar:nth-child(2) { animation-delay: 0.2s; }
    .visualizer-bar:nth-child(3) { animation-delay: 0.3s; }
    .visualizer-bar:nth-child(4) { animation-delay: 0.4s; }
    .visualizer-bar:nth-child(5) { animation-delay: 0.5s; }
    
    @keyframes visualize {
      0%, 100% { height: 5px; }
      50% { height: 25px; }
    }
    
    /* Glow Effect */
    .glow-effect {
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.3),
                  0 0 40px rgba(102, 126, 234, 0.2),
                  0 0 60px rgba(102, 126, 234, 0.1);
    }
    
    /* Header Animation */
    .header-title {
      background: linear-gradient(45deg, #fbbf24, #f093fb, #667eea, #764ba2);
      background-size: 300% 300%;
      animation: headerGradient 6s ease infinite;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 30px rgba(251, 191, 36, 0.3);
    }
    
    @keyframes headerGradient {
      0%, 100% { background-position: 0% 50%; }
      33% { background-position: 100% 0%; }
      66% { background-position: 100% 100%; }
    }
  </style>
</head>
<body class="min-h-screen p-4 lg:p-6">
  <!-- Animated Background Particles -->
  <div id="particles"></div>

  <!-- Floating Music Notes -->
  <div class="floating-music-note" style="top: 15%; left: 8%;"><i class="fas fa-music"></i></div>
  <div class="floating-music-note" style="top: 25%; right: 12%; animation-delay: -2s;"><i class="fas fa-musical-note"></i></div>
  <div class="floating-music-note" style="bottom: 20%; left: 15%; animation-delay: -4s;"><i class="fas fa-music"></i></div>
  <div class="floating-music-note" style="bottom: 30%; right: 8%; animation-delay: -1s;"><i class="fas fa-musical-note"></i></div>
  <div class="floating-music-note" style="top: 45%; left: 25%; animation-delay: -3s;"><i class="fas fa-compact-disc"></i></div>
  <div class="floating-music-note" style="bottom: 45%; right: 25%; animation-delay: -5s;"><i class="fas fa-headphones"></i></div>

  <div class="container max-w-7xl mx-auto">
    <!-- Main Container -->
    <div class="glass-effect rounded-3xl p-6 lg:p-8 relative overflow-hidden">
      <!-- Header -->
      <div class="text-center mb-10">
        <h1 class="text-4xl lg:text-6xl font-black text-white mb-4 pulse-animation header-title">
          <i class="fas fa-headphones mr-4 text-yellow-400"></i>
          Playlist Musik Favorit
        </h1>
        <p class="text-white/90 text-lg lg:text-xl font-medium">Koleksi musik pilihan terbaik dengan kualitas audio premium</p>
        <div class="mt-4 flex justify-center">
          <div class="music-visualizer">
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
          </div>
        </div>
      </div>

      <!-- Back Button -->
      <button id="backButton" class="hidden mb-8 px-8 py-4 bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 text-white rounded-full hover:from-purple-700 hover:via-pink-600 hover:to-purple-700 transition-all duration-500 font-bold shadow-2xl glow-effect transform hover:scale-105">
        <i class="fas fa-arrow-left mr-3"></i>
        Kembali ke Daftar Artis
      </button>

      <!-- Artist List -->
      <div id="artistList" class="grid-responsive"></div>

      <!-- Playlist -->
      <div id="playlist" class="hidden space-y-6"></div>

      <!-- Audio Player (Hidden) -->
      <audio id="audioPlayer" class="hidden"></audio>

      <!-- Music Controls -->
      <div id="musicControls" class="hidden mt-10 text-center">
        <div class="glass-effect rounded-3xl p-8 mb-8 glow-effect">
          <div id="nowPlaying" class="text-xl lg:text-2xl font-bold mb-8 now-playing-text"></div>
          
          <!-- Elegant Control Buttons -->
          <div class="flex items-center justify-center space-x-6">
            <button onclick="playPreviousSong()" class="control-btn w-16 h-16 rounded-full text-white flex items-center justify-center text-xl hover:text-purple-300">
              <i class="fas fa-step-backward"></i>
            </button>
            
            <button id="playPauseBtn" onclick="togglePlayPause()" class="control-btn w-20 h-20 rounded-full text-white flex items-center justify-center text-2xl hover:text-pink-300">
              <i id="playPauseIcon" class="fas fa-play"></i>
            </button>
            
            <button onclick="playNextSongManual()" class="control-btn w-16 h-16 rounded-full text-white flex items-center justify-center text-xl hover:text-blue-300">
              <i class="fas fa-step-forward"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Lyrics -->
      <div id="lyrics" class="mt-10 p-8 glass-effect rounded-3xl text-white font-medium text-base lg:text-lg leading-relaxed max-h-96 overflow-y-auto">
        <div class="empty-state rounded-2xl p-10 text-center">
          <i class="fas fa-headphones text-5xl text-white/20 mb-6"></i>
          <p class="text-white/60 text-lg">Pilih artis dan lagu untuk memulai perjalanan musik</p>
        </div>
      </div>

      <!-- Footer with Contact -->
      <footer class="mt-16 pt-10 border-t border-white/20">
        <div class="flex flex-col lg:flex-row items-center justify-between space-y-6 lg:space-y-0">
          <div class="text-white/80">
            <p class="text-base font-medium">&copy; 2025 <span class="font-bold text-yellow-400 text-lg">Yudis</span>. All rights reserved.</p>
          </div>
          
          <div class="flex items-center space-x-6">
            <p class="text-white/80 text-lg font-semibold">Contact Me:</p>
            
            <!-- Instagram -->
            <a href="https://instagram.com/yudis_299" target="_blank" 
               class="contact-icon flex items-center space-x-3 bg-gradient-to-r from-purple-600 to-pink-500 px-6 py-3 rounded-full text-white hover:shadow-2xl transform hover:scale-110">
              <i class="fab fa-instagram text-xl"></i>
              <span class="font-semibold">@yudis_299</span>
            </a>
            
            <!-- WhatsApp -->
            <a href="https://wa.me/6285124039070" target="_blank" 
               class="contact-icon flex items-center space-x-3 bg-gradient-to-r from-green-600 to-emerald-500 px-6 py-3 rounded-full text-white hover:shadow-2xl transform hover:scale-110">
              <i class="fab fa-whatsapp text-xl"></i>
              <span class="font-semibold">WhatsApp</span>
            </a>
          </div>
        </div>
      </footer>
    </div>
  </div>

  <script>
    const playlist = [
      {
        artist: "Nina",
        title: "Feast",
        mp3: "music/nina/feast.mp3",
        lyric: "lyrics/nina/feast.js",
        artistPhoto: "https://files.catbox.moe/u5b8mp.jpeg"
      },
      {
        artist: "Nina",
        title: "Tarot",
        mp3: "music/nina/tarot.mp3",
        lyric: "lyrics/nina/tarot.js",
        artistPhoto: "https://files.catbox.moe/u5b8mp.jpeg"
      },
      {
        artist: "Nina",
        title: "o,Tuan",
        mp3: "music/nina/otuan.mp3",
        lyric: "lyrics/nina/otuan.js",
        artistPhoto: "https://files.catbox.moe/u5b8mp.jpeg"
      },
      {
        artist: "Hindia",
        title: "Evaluasi",
        mp3: "music/hindia/evaluasi.mp3",
        lyric: "lyrics/hindia/evaluasi.js",
        artistPhoto: "https://files.catbox.moe/ln8c0r.jpg"
      },
      {
        artist: "Hindia",
        title: "Cincin",
        mp3: "music/hindia/cincin.mp3",
        lyric: "lyrics/hindia/cincin.js",
        artistPhoto: "https://files.catbox.moe/ln8c0r.jpg"
      },
      {
        artist: "Hindia",
        title: "Kita Kesana",
        mp3: "music/hindia/kitakesana.mp3",
        lyric: "lyrics/hindia/kitakesana.js",
        artistPhoto: "https://files.catbox.moe/ln8c0r.jpg"
      },
      {
        artist: "Nadhif Basalamah",
        title: "Bergema Sampai Selamanya",
        mp3: "music/nadifbasalamah/bergema.mp3",
        lyric: "lyrics/nadifbasalamah/bergema.js",
        artistPhoto: "https://files.catbox.moe/951vb9.jpeg"
      },
      {
        artist: "Nadhif Basalamah",
        title: "Penjaga Hati",
        mp3: "music/nadifbasalamah/penjagahati.mp3",
        lyric: "lyrics/nadifbasalamah/penjagahati.js",
        artistPhoto: "https://files.catbox.moe/951vb9.jpeg"
      }
    ];

    const artistList = document.getElementById('artistList');
    const playlistContainer = document.getElementById('playlist');
    const audioPlayer = document.getElementById('audioPlayer');
    const lyricsContainer = document.getElementById('lyrics');
    const backButton = document.getElementById('backButton');
    const nowPlaying = document.getElementById('nowPlaying');
    const musicControls = document.getElementById('musicControls');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const playPauseIcon = document.getElementById('playPauseIcon');
    
    let currentLyrics = [];
    let currentLineIndex = -1;
    let currentPlaylist = [];
    let currentSongIndex = -1;
    let isPlaying = false;

    // Create animated particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      
      for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + 'vw';
        particle.style.width = particle.style.height = Math.random() * 4 + 2 + 'px';
        particle.style.animationDelay = Math.random() * 20 + 's';
        particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
        particlesContainer.appendChild(particle);
      }
    }

    function getArtists() {
      const artistsData = {};
      playlist.forEach(song => {
        if (!artistsData[song.artist]) {
          artistsData[song.artist] = {
            name: song.artist,
            songCount: 0,
            photo: song.artistPhoto
          };
        }
        artistsData[song.artist].songCount++;
      });
      return Object.values(artistsData);
    }

    function loadArtists() {
      artistList.innerHTML = '';
      const artists = getArtists();
      artists.forEach((artistData, index) => {
        const artistElement = document.createElement('div');
        artistElement.classList.add('artist-card', 'card-gradient', 'p-8', 'rounded-3xl', 'cursor-pointer', 'transition-all', 'duration-500', 'fade-in', 'text-center', 'group');
        artistElement.style.animationDelay = (index * 0.1) + 's';
        artistElement.innerHTML = `
          ${artistData.photo ? `
            <div class="mb-6 flex justify-center">
              <img src="${artistData.photo}" alt="${artistData.name}" 
                   class="artist-photo w-24 h-24 lg:w-32 lg:h-32 rounded-full object-cover border-4 border-yellow-400/60 shadow-2xl transition-all duration-300">
            </div>
          ` : `
            <div class="text-5xl mb-6 text-yellow-400 transition-transform duration-300 group-hover:scale-110">
              <i class="fas fa-user-music"></i>
            </div>
          `}
          <h3 class="text-xl lg:text-2xl font-bold text-white mb-3">${artistData.name}</h3>
          <p class="text-white/80 text-base font-medium">${artistData.songCount} lagu premium</p>
          <div class="mt-4 w-16 h-1 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mx-auto transform scale-0 group-hover:scale-100 transition-transform duration-300"></div>
        `;
        artistElement.addEventListener('click', () => showArtistSongs(artistData.name));
        artistList.appendChild(artistElement);
      });
    }

    function showArtistSongs(artist) {
      artistList.classList.add('hidden');
      playlistContainer.classList.remove('hidden');
      backButton.classList.remove('hidden');
      playlistContainer.innerHTML = '';

      currentPlaylist = playlist.filter(song => song.artist === artist);
      currentSongIndex = -1;
      
      // Artist Header dengan foto
      const artistHeader = document.createElement('div');
      artistHeader.classList.add('text-center', 'mb-10', 'fade-in');
      
      const artistPhoto = currentPlaylist[0]?.artistPhoto;
      artistHeader.innerHTML = `
        <div class="flex flex-col items-center space-y-6">
          ${artistPhoto ? `
            <div class="relative">
              <img src="${artistPhoto}" alt="${artist}" 
                   class="w-40 h-40 lg:w-48 lg:h-48 rounded-full object-cover border-6 border-yellow-400/60 shadow-2xl hover:scale-105 transition-all duration-500 glow-effect">
              <div class="absolute inset-0 rounded-full bg-gradient-to-t from-black/30 to-transparent"></div>
              <div class="absolute -inset-2 rounded-full bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 opacity-0 hover:opacity-20 transition-opacity duration-500"></div>
            </div>
          ` : `
            <div class="w-40 h-40 lg:w-48 lg:h-48 rounded-full bg-gradient-to-br from-yellow-400/30 via-purple-500/30 to-pink-400/30 flex items-center justify-center border-6 border-yellow-400/60 shadow-2xl glow-effect">
              <i class="fas fa-user-music text-6xl text-white"></i>
            </div>
          `}
          <div>
            <h2 class="text-4xl lg:text-5xl font-black text-white mb-4 header-title">${artist}</h2>
            <p class="text-white/80 text-xl font-semibold">${currentPlaylist.length} lagu tersedia</p>
            <div class="mt-4 flex justify-center">
              <div class="music-visualizer">
                <div class="visualizer-bar"></div>
                <div class="visualizer-bar"></div>
                <div class="visualizer-bar"></div>
                <div class="visualizer-bar"></div>
                <div class="visualizer-bar"></div>
              </div>
            </div>
          </div>
        </div>
      `;
      playlistContainer.appendChild(artistHeader);
      
      // Songs List
      currentPlaylist.forEach((song, index) => {
        const songElement = document.createElement('div');
        songElement.classList.add('song-card', 'card-gradient', 'p-6', 'rounded-2xl', 'cursor-pointer', 'transition-all', 'duration-300', 'fade-in', 'flex', 'items-center', 'space-x-6', 'group');
        songElement.style.animationDelay = ((index + 1) * 0.1) + 's';
        songElement.innerHTML = `
          <div class="play-icon text-3xl text-yellow-400 transition-all duration-300">
            <i class="fas fa-play-circle"></i>
          </div>
          <div class="flex-1">
            <h4 class="text-xl font-bold text-white mb-1">${song.title}</h4>
            <p class="text-white/70 text-base font-medium">${song.artist}</p>
          </div>
          <div class="text-white/60 text-base font-semibold">
            ${index + 1}/${currentPlaylist.length}
          </div>
          <div class="w-2 h-12 bg-gradient-to-b from-purple-400 to-pink-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        `;
        songElement.dataset.songIndex = index;
        songElement.addEventListener('click', () => playSong(song, index));
        playlistContainer.appendChild(songElement);
      });
    }

    function playSong(song, index = -1) {
      if (index !== -1) {
        currentSongIndex = index;
      }
      
      // Update visual selection
      document.querySelectorAll('#playlist > div.song-card').forEach(el => {
        el.classList.remove('bg-gradient-to-r', 'from-yellow-400/20', 'via-purple-400/20', 'to-pink-400/20');
        el.classList.add('card-gradient');
      });
      
      const currentSongElement = document.querySelector(`[data-song-index="${currentSongIndex}"]`);
      if (currentSongElement) {
        currentSongElement.classList.remove('card-gradient');
        currentSongElement.classList.add('bg-gradient-to-r', 'from-yellow-400/20', 'via-purple-400/20', 'to-pink-400/20');
        currentSongElement.style.boxShadow = '0 0 30px rgba(251, 191, 36, 0.3)';
      }

      audioPlayer.src = song.mp3;
      audioPlayer.play().catch(error => {
        console.error('Gagal memutar audio:', error);
        nowPlaying.innerHTML = `
          <i class="fas fa-exclamation-triangle mr-3 text-red-400"></i>
          Gagal memutar lagu. Pastikan file audio tersedia.
        `;
      });

      isPlaying = true;
      updatePlayPauseButton();
      musicControls.classList.remove('hidden');
      
      nowPlaying.innerHTML = `
        <div class="flex items-center justify-center mb-2">
          <div class="music-visualizer mr-4">
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
          </div>
          <i class="fas fa-music mr-3"></i>
          Sedang diputar
        </div>
        <div class="text-2xl font-black">${song.artist} - ${song.title}</div>
        <div class="text-white/70 text-lg mt-2">Track ${currentSongIndex + 1} dari ${currentPlaylist.length}</div>
      `;
      
      loadLyrics(song.lyric);
    }

    function togglePlayPause() {
      if (isPlaying) {
        audioPlayer.pause();
        isPlaying = false;
      } else {
        audioPlayer.play();
        isPlaying = true;
      }
      updatePlayPauseButton();
    }

    function updatePlayPauseButton() {
      if (isPlaying) {
        playPauseIcon.className = 'fas fa-pause';
      } else {
        playPauseIcon.className = 'fas fa-play';
      }
    }

    function loadLyrics(lyricPath) {
      lyricsContainer.innerHTML = `
        <div class="text-center py-10">
          <i class="fas fa-spinner loading-spinner text-3xl text-yellow-400 mb-6"></i>
          <p class="text-white/80 text-lg">Memuat lirik dengan kualitas terbaik...</p>
        </div>
      `;
      const oldScript = document.getElementById('lyricScript');
      if (oldScript) oldScript.remove();

      const script = document.createElement('script');
      script.id = 'lyricScript';
      script.src = lyricPath;
      script.onload = () => {
        if (window.lyrics && Array.isArray(window.lyrics)) {
          currentLyrics = window.lyrics.filter(line => 
            typeof line === 'object' && 
            typeof line.time === 'number' && 
            typeof line.text === 'string'
          );
          
          if (currentLyrics.length > 0) {
            displayLyrics();
            startAutoScroll();
          } else {
            lyricsContainer.innerHTML = `
              <div class="empty-state rounded-2xl p-10 text-center">
                <i class="fas fa-exclamation-triangle text-3xl text-orange-400 mb-6"></i>
                <p class="text-white/80 text-lg">Format lirik tidak valid.</p>
              </div>
            `;
          }
        } else {
          lyricsContainer.innerHTML = `
            <div class="empty-state rounded-2xl p-10 text-center">
              <i class="fas fa-times-circle text-3xl text-red-400 mb-6"></i>
              <p class="text-white/80 text-lg">Lirik tidak valid.</p>
            </div>
          `;
        }
      };
      script.onerror = () => {
        lyricsContainer.innerHTML = `
          <div class="empty-state rounded-2xl p-10 text-center">
            <i class="fas fa-exclamation-circle text-3xl text-red-400 mb-6"></i>
            <p class="text-white/80 text-lg">Gagal memuat lirik.</p>
            <p class="text-white/60 text-base mt-3">${lyricPath}</p>
          </div>
        `;
      };
      document.body.appendChild(script);
    }

    function displayLyrics() {
      lyricsContainer.innerHTML = '';
      if (!currentLyrics || !Array.isArray(currentLyrics)) {
        lyricsContainer.innerHTML = `
          <div class="empty-state rounded-2xl p-10 text-center">
            <i class="fas fa-music text-3xl text-white/50 mb-6"></i>
            <p class="text-white/80 text-lg">Tidak ada lirik untuk ditampilkan.</p>
          </div>
        `;
        return;
      }
      
      currentLyrics.forEach((line, index) => {
        const lineElement = document.createElement('div');
        lineElement.classList.add('lyric-line');
        lineElement.textContent = line.text;
        lineElement.dataset.index = index;
        lineElement.dataset.time = line.time;
        lyricsContainer.appendChild(lineElement);
      });
      
      currentLineIndex = -1;
      updateLyricDisplay();
    }

    function startAutoScroll() {
      currentLineIndex = -1;
      updateLyricDisplay();
      
      audioPlayer.removeEventListener('timeupdate', handleTimeUpdate);
      audioPlayer.removeEventListener('ended', handleEnded);
      audioPlayer.removeEventListener('pause', handlePause);
      audioPlayer.removeEventListener('play', handlePlay);
      
      audioPlayer.addEventListener('timeupdate', handleTimeUpdate);
      audioPlayer.addEventListener('ended', handleEnded);
      audioPlayer.addEventListener('pause', handlePause);
      audioPlayer.addEventListener('play', handlePlay);
    }

    function handleTimeUpdate() {
      const currentTime = audioPlayer.currentTime;
      let newLineIndex = -1;
      
      for (let i = currentLyrics.length - 1; i >= 0; i--) {
        if (currentTime >= currentLyrics[i].time) {
          newLineIndex = i;
          break;
        }
      }
      
      if (newLineIndex !== currentLineIndex) {
        currentLineIndex = newLineIndex;
        updateLyricDisplay();
        if (newLineIndex >= 0) {
          scrollToCurrentLine();
        }
      }
    }

    function handleEnded() {
      isPlaying = false;
      updatePlayPauseButton();
      currentLineIndex = -1;
      updateLyricDisplay();
      lyricsContainer.scrollTop = 0;
      playNextSong();
    }

    function handlePause() {
      isPlaying = false;
      updatePlayPauseButton();
    }

    function handlePlay() {
      isPlaying = true;
      updatePlayPauseButton();
    }

    function playNextSongManual() {
      if (currentPlaylist.length > 0 && currentSongIndex < currentPlaylist.length - 1) {
        const nextIndex = currentSongIndex + 1;
        const nextSong = currentPlaylist[nextIndex];
        playSong(nextSong, nextIndex);
      } else if (currentPlaylist.length > 0) {
        const firstSong = currentPlaylist[0];
        playSong(firstSong, 0);
      }
    }

    function playPreviousSong() {
      if (currentPlaylist.length > 0 && currentSongIndex > 0) {
        const prevIndex = currentSongIndex - 1;
        const prevSong = currentPlaylist[prevIndex];
        playSong(prevSong, prevIndex);
      } else if (currentPlaylist.length > 0) {
        const lastIndex = currentPlaylist.length - 1;
        const lastSong = currentPlaylist[lastIndex];
        playSong(lastSong, lastIndex);
      }
    }

    function playNextSong() {
      if (currentPlaylist.length > 0 && currentSongIndex < currentPlaylist.length - 1) {
        const nextIndex = currentSongIndex + 1;
        const nextSong = currentPlaylist[nextIndex];
        setTimeout(() => {
          playSong(nextSong, nextIndex);
        }, 1000);
      } else if (currentPlaylist.length > 0) {
        nowPlaying.innerHTML = `
          <div class="flex items-center justify-center">
            <i class="fas fa-check-circle mr-3 text-green-400 text-2xl"></i>
            <span class="text-xl">Playlist selesai - Semua lagu telah diputar</span>
          </div>
        `;
        musicControls.classList.add('hidden');
        currentSongIndex = -1;
        document.querySelectorAll('#playlist > div.song-card').forEach(el => {
          el.classList.remove('bg-gradient-to-r', 'from-yellow-400/20', 'via-purple-400/20', 'to-pink-400/20');
          el.classList.add('card-gradient');
          el.style.boxShadow = '';
        });
      }
    }

    function updateLyricDisplay() {
      const lyricLines = document.querySelectorAll('.lyric-line');
      
      lyricLines.forEach((line, index) => {
        line.classList.remove('current', 'passed', 'upcoming');
        
        if (currentLineIndex === -1) {
          line.classList.add('upcoming');
        } else if (index < currentLineIndex) {
          line.classList.add('passed');
        } else if (index === currentLineIndex) {
          line.classList.add('current');
        } else {
          line.classList.add('upcoming');
        }
      });
    }

    function scrollToCurrentLine() {
      const currentLine = document.querySelector(`[data-index="${currentLineIndex}"]`);
      if (currentLine) {
        currentLine.scrollIntoView({
          behavior: 'smooth',
          block: 'center'
        });
      }
    }

    backButton.addEventListener('click', () => {
      artistList.classList.remove('hidden');
      playlistContainer.classList.add('hidden');
      backButton.classList.add('hidden');
      musicControls.classList.add('hidden');
      audioPlayer.pause();
      isPlaying = false;
      updatePlayPauseButton();
      nowPlaying.textContent = '';
      lyricsContainer.innerHTML = `
        <div class="empty-state rounded-2xl p-10 text-center">
          <i class="fas fa-music text-5xl text-white/20 mb-6"></i>
          <p class="text-white/60 text-lg">Pilih artis dan lagu untuk memulai perjalanan musik</p>
        </div>
      `;
      currentLyrics = [];
      currentLineIndex = -1;
      currentPlaylist = [];
      currentSongIndex = -1;
      
      // Clean up listeners
      audioPlayer.removeEventListener('timeupdate', handleTimeUpdate);
      audioPlayer.removeEventListener('ended', handleEnded);
      audioPlayer.removeEventListener('pause', handlePause);
      audioPlayer.removeEventListener('play', handlePlay);
    });

    // Initialize
    createParticles();
    loadArtists();
  </script>
</body>
</html>